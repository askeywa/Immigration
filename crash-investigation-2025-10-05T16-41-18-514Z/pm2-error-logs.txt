[TAILING] Tailing last 500 lines for [immigration-portal] process (change the value with --lines option)
/home/ubuntu/.pm2/logs/immigration-portal-error.log last 500 lines:
0|immigrat | Error checking trial expirations: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 15000ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }
0|immigrat | Error checking system health: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 14999ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }
0|immigrat | Error checking system health: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 15000ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }
0|immigrat | Error checking payment failures: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 14999ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }
0|immigrat | Error checking system health: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 14999ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }
0|immigrat | Error: AuditLog validation failed: userId: Cast to ObjectId failed for value "system" (type string) at path "userId" because of "BSONError", action: `performance_alert` is not a valid enum value for path `action`., resource: `Performance alert: Slow respon...` is not a valid enum value for path `resource`.
0|immigrat |     at ValidationError.inspect (/var/www/immigration-portal/backend/node_modules/mongoose/lib/error/validation.js:52:26)
0|immigrat |     at formatValue (node:internal/util/inspect:887:19)
0|immigrat |     at inspect (node:internal/util/inspect:409:10)
0|immigrat |     at formatWithOptionsInternal (node:internal/util/inspect:2579:40)
0|immigrat |     at formatWithOptions (node:internal/util/inspect:2441:10)
0|immigrat |     at console.value (node:internal/console/constructor:345:14)
0|immigrat |     at console.error (node:internal/console/constructor:412:61)
0|immigrat |     at console.error (/var/www/immigration-portal/backend/node_modules/@sentry/node-core/node_modules/@sentry/core/src/instrument/console.ts:39:14)
0|immigrat |     at NotifyFeature.onUnhandledRejection (/usr/lib/node_modules/pm2/node_modules/@pm2/io/build/main/features/notify.js:138:17)
0|immigrat |     at process.emit (node:events:531:35) {
0|immigrat |   errors: {
0|immigrat |     userId: CastError: Cast to ObjectId failed for value "system" (type string) at path "userId" because of "BSONError"
0|immigrat |         at SchemaObjectId.cast (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)
0|immigrat |         at SchemaObjectId.SchemaType.applySetters (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1259:12)
0|immigrat |         at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1442:22)
0|immigrat |         at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1136:16)
0|immigrat |         at model.Document (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:178:12)
0|immigrat |         at model.Model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:127:12)
0|immigrat |         at new model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:4845:15)
0|immigrat |         at Function.auditLogSchema.statics.logAction (/var/www/immigration-portal/backend/src/models/AuditLog.ts:131:15)
0|immigrat |         at Function.logAction (/var/www/immigration-portal/backend/src/services/auditLogService.ts:22:21)
0|immigrat |         at /var/www/immigration-portal/backend/src/services/performanceMonitoringService.ts:576:25 {
0|immigrat |       stringValue: '"system"',
0|immigrat |       messageFormat: undefined,
0|immigrat |       kind: 'ObjectId',
0|immigrat |       value: 'system',
0|immigrat |       path: 'userId',
0|immigrat |       reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
0|immigrat |           at new ObjectId (/var/www/immigration-portal/backend/node_modules/bson/src/objectid.ts:120:15)
0|immigrat |           at castObjectId (/var/www/immigration-portal/backend/node_modules/mongoose/lib/cast/objectid.js:25:12)
0|immigrat |           at SchemaObjectId.cast (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schema/objectId.js:249:12)
0|immigrat |           at SchemaObjectId.SchemaType.applySetters (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1259:12)
0|immigrat |           at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1442:22)
0|immigrat |           at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1136:16)
0|immigrat |           at model.Document (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:178:12)
0|immigrat |           at model.Model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:127:12)
0|immigrat |           at new model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:4845:15)
0|immigrat |           at Function.auditLogSchema.statics.logAction (/var/www/immigration-portal/backend/src/models/AuditLog.ts:131:15),
0|immigrat |       valueType: 'string'
0|immigrat |     },
0|immigrat |     action: ValidatorError: `performance_alert` is not a valid enum value for path `action`.
0|immigrat |         at validate (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1414:13)
0|immigrat |         at SchemaString.SchemaType.doValidate (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1398:7)
0|immigrat |         at /var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:3115:18
0|immigrat |         at processTicksAndRejections (node:internal/process/task_queues:85:11) {
0|immigrat |       properties: [Object],
0|immigrat |       kind: 'enum',
0|immigrat |       path: 'action',
0|immigrat |       value: 'performance_alert',
0|immigrat |       reason: undefined,
0|immigrat |       [Symbol(mongoose#validatorError)]: true
0|immigrat |     },
0|immigrat |     resource: ValidatorError: `Performance alert: Slow respon...` is not a valid enum value for path `resource`.
0|immigrat |         at validate (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1414:13)
0|immigrat |         at SchemaString.SchemaType.doValidate (/var/www/immigration-portal/backend/node_modules/mongoose/lib/schemaType.js:1398:7)
0|immigrat |         at /var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:3115:18
0|immigrat |         at processTicksAndRejections (node:internal/process/task_queues:85:11) {
0|immigrat |       properties: [Object],
0|immigrat |       kind: 'enum',
0|immigrat |       path: 'resource',
0|immigrat |       value: 'Performance alert: Slow respon...',
0|immigrat |       reason: undefined,
0|immigrat |       [Symbol(mongoose#validatorError)]: true
0|immigrat |     }
0|immigrat |   },
0|immigrat |   _message: 'AuditLog validation failed'
0|immigrat | }
0|immigrat | This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:
0|immigrat | ValidationError: AuditLog validation failed: userId: Cast to ObjectId failed for value "system" (type string) at path "userId" because of "BSONError", action: `performance_alert` is not a valid enum value for path `action`., resource: `Performance alert: Slow respon...` is not a valid enum value for path `resource`.
0|immigrat |     at model.Document.invalidate (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:3362:32)
0|immigrat |     at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1484:12)
0|immigrat |     at model.$set (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:1136:16)
0|immigrat |     at model.Document (/var/www/immigration-portal/backend/node_modules/mongoose/lib/document.js:178:12)
0|immigrat |     at model.Model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:127:12)
0|immigrat |     at new model (/var/www/immigration-portal/backend/node_modules/mongoose/lib/model.js:4845:15)
0|immigrat |     at Function.auditLogSchema.statics.logAction (/var/www/immigration-portal/backend/src/models/AuditLog.ts:131:15)
0|immigrat |     at Function.logAction (/var/www/immigration-portal/backend/src/services/auditLogService.ts:22:21)
0|immigrat |     at /var/www/immigration-portal/backend/src/services/performanceMonitoringService.ts:576:25
0|immigrat |     at Array.forEach (<anonymous>)
0|immigrat | Error checking system health: MongoNetworkTimeoutError: Socket 'secureConnect' timed out after 14999ms (connectTimeoutMS: 15000)
0|immigrat |     at TLSSocket.<anonymous> (/var/www/immigration-portal/backend/node_modules/mongodb/src/cmap/connect.ts:399:11)
0|immigrat |     at Object.onceWrapper (node:events:633:28)
0|immigrat |     at TLSSocket.emit (node:events:519:28)
0|immigrat |     at TLSSocket.Socket._onTimeout (node:net:604:8)
0|immigrat |     at listOnTimeout (node:internal/timers:588:17)
0|immigrat |     at processTimers (node:internal/timers:523:7) {
0|immigrat |   errorLabelSet: Set(0) {},
0|immigrat |   beforeHandshake: false,
0|immigrat |   connectionGeneration: 0,
0|immigrat |   [cause]: undefined
0|immigrat | }

